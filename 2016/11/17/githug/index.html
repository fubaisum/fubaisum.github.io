

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>通关 githug | JiajieShen&#39;s Blog</title>
  <meta name="author" content="Jiajie Shen">
  
  <meta name="description" content="githug 是一个用来练习 git 命令的小游戏。项目地址：https://github.com/Gazler/githug 
参考：「Githug」Git 游戏通关流程 
准备安装 ruby1sudo dnf install ruby
安装 githug1sudo gem install git">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="通关 githug"/>
  <meta property="og:site_name" content="JiajieShen&#39;s Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="JiajieShen&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">JiajieShen&#39;s Blog</a></h1>
  <h2><a href="/">Don&#39;t retry yourself.</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-11-17T08:29:27.000Z"><a href="/2016/11/17/githug/">2016-11-17</a></time>
      
      
  
    <h1 class="title">通关 githug</h1>
  

    </header>
    <div class="entry">
      
        <p>githug 是一个用来练习 git 命令的小游戏。项目地址：<a href="https://github.com/Gazler/githug" target="_blank" rel="external">https://github.com/Gazler/githug</a> </p>
<p>参考：<a href="http://www.jianshu.com/p/482b32716bbe" target="_blank" rel="external">「Githug」Git 游戏通关流程</a> </p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>安装 ruby<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo dnf install ruby</div></pre></td></tr></table></figure></p>
<p>安装 githug<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gem install githug</div></pre></td></tr></table></figure></p>
<h2 id="开始游戏"><a href="#开始游戏" class="headerlink" title="开始游戏"></a>开始游戏</h2><p>选择一个自己喜欢的目录开始游戏。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">githug</div></pre></td></tr></table></figure></p>
<p>提示创建游戏目录（如下），键入 y 确认。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">No githug directory found, <span class="keyword">do</span> you wish to create one? [yn]</div></pre></td></tr></table></figure></p>
<p>ps：githug 的主要命令有以下 4 个：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Githug has 4 game commands:</div><div class="line"></div><div class="line"><span class="comment"># 验证</span></div><div class="line">play - The default <span class="built_in">command</span>, checks your solution <span class="keyword">for</span> the current level</div><div class="line"><span class="comment"># 显示当前关卡的提示信息</span></div><div class="line">hint - Gives you a hint (<span class="keyword">if</span> available) <span class="keyword">for</span> the current level</div><div class="line"><span class="comment"># 重置关卡（可指定）</span></div><div class="line">reset - Reset the current level or reset the level to a given name or path</div><div class="line"><span class="comment"># 显示所有关卡</span></div><div class="line">levels - List all the levels</div></pre></td></tr></table></figure></p>
<h3 id="第一关（init）"><a href="#第一关（init）" class="headerlink" title="第一关（init）"></a>第一关（init）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: init</div><div class="line">Level: 1</div><div class="line">Difficulty: *</div><div class="line"></div><div class="line">A new directory, `git_hug`, has been created; initialize an empty repository <span class="keyword">in</span> it.</div></pre></td></tr></table></figure>
<p>在 git_hug 目录下初始化一个空仓库。初始化后，会在 git_hug 目录下创建一个 .git 目录，是 git 用来保存 git_hug 目录内容的跟踪管理信息，通常不需要手动修改。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> git_hug</div><div class="line">git init</div></pre></td></tr></table></figure></p>
<p>用 githug play 命令验证结果，成功就会直接进入下一关（该步骤在下文不再重复写）。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">githug play</div></pre></td></tr></table></figure></p>
<h3 id="第二关（config）"><a href="#第二关（config）" class="headerlink" title="第二关（config）"></a>第二关（config）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: config</div><div class="line">Level: 2</div><div class="line">Difficulty: *</div><div class="line"></div><div class="line">Set up your git name and email, this is important so that your commits can be identified.</div></pre></td></tr></table></figure>
<p>设置 git 的用户名和邮箱。–local 表示配置是属于仓库本地的，即配置只影响当前仓库；如果要设置全局配置，可使用 –global 参数。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git config --local user.name jiajieshen</div><div class="line">git config --local user.email scausum@163.com</div></pre></td></tr></table></figure></p>
<h3 id="第三关（add）"><a href="#第三关（add）" class="headerlink" title="第三关（add）"></a>第三关（add）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Name: add</div><div class="line">Level: 3</div><div class="line">Difficulty: *</div><div class="line"></div><div class="line">There is a file <span class="keyword">in</span> your folder called `README`, you should add it to your staging area</div><div class="line">Note: You start each level with a new repo. Don<span class="string">'t look for files from the previous one.</span></div></pre></td></tr></table></figure>
<p>将 README 文件添加进 staging area（暂存区） 。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git status <span class="comment">#（可选）</span></div><div class="line">git add README </div><div class="line">git status <span class="comment">#（可选）</span></div></pre></td></tr></table></figure></p>
<p>ps ：可使用 git status 命令查看文件在 git 跟踪管理中的状态。</p>
<ul>
<li>Changes to be committed 区域显示的是 staging area 的文件，可以被 commit 进入本地仓库。</li>
<li>Changes not staged for commit 区域显示的是 working directory 的文件，可以被 add 进 staging area 。</li>
<li>Untracked files 区域显示的是未被 git 跟踪管理的文件，可以被 add 进 staging area 。 </li>
</ul>
<h3 id="第四关（commit）"><a href="#第四关（commit）" class="headerlink" title="第四关（commit）"></a>第四关（commit）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: commit</div><div class="line">Level: 4</div><div class="line">Difficulty: *</div><div class="line"></div><div class="line">The `README` file has been added to your staging area, now commit it.</div></pre></td></tr></table></figure>
<p>提交 staging area 的内容到仓库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit -m <span class="string">"注释"</span></div></pre></td></tr></table></figure></p>
<p>可列出指定要 commit 的文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit README -m <span class="string">"Add README"</span></div></pre></td></tr></table></figure></p>
<h3 id="第五关（clone）"><a href="#第五关（clone）" class="headerlink" title="第五关（clone）"></a>第五关（clone）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: <span class="built_in">clone</span></div><div class="line">Level: 5</div><div class="line">Difficulty: *</div><div class="line"></div><div class="line">Clone the repository at https://github.com/Gazler/cloneme.</div></pre></td></tr></table></figure>
<p>克隆一个仓库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/Gazler/cloneme</div></pre></td></tr></table></figure></p>
<h3 id="第六关（clone-to-folder）"><a href="#第六关（clone-to-folder）" class="headerlink" title="第六关（clone to folder）"></a>第六关（clone to folder）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: clone_to_folder</div><div class="line">Level: 6</div><div class="line">Difficulty: *</div><div class="line"></div><div class="line">Clone the repository at https://github.com/Gazler/cloneme to `my_cloned_repo`.</div></pre></td></tr></table></figure>
<p>克隆一个仓库并指定目录名。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/Gazler/cloneme my_cloned_repo</div></pre></td></tr></table></figure></p>
<h3 id="第七关（ignore）"><a href="#第七关（ignore）" class="headerlink" title="第七关（ignore）"></a>第七关（ignore）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: ignore</div><div class="line">Level: 7</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">The text editor <span class="string">'vim'</span> creates files ending <span class="keyword">in</span> `.swp` (swap files) <span class="keyword">for</span> all files that are currently open.  We don<span class="string">'t want them creeping into the repository.  Make this repository ignore those swap files which are ending in `.swp`.</span></div></pre></td></tr></table></figure>
<p>忽略所有 .swp 文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi .gitignore <span class="comment"># <span class="doctag">TODO:</span> 添加 *.swp</span></div></pre></td></tr></table></figure></p>
<h3 id="第八关（include）"><a href="#第八关（include）" class="headerlink" title="第八关（include）"></a>第八关（include）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: include</div><div class="line">Level: 8</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">Notice a few files with the <span class="string">'.a'</span> extension.  We want git to ignore all but the <span class="string">'lib.a'</span> file.\</div></pre></td></tr></table></figure>
<p>忽略除了 lib.a 文件以外的所有以 .a 作为后缀的文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">vi .gitignore <span class="comment"># TODO：添加忽略 *.a ，但 !lib.a</span></div><div class="line">githug play</div></pre></td></tr></table></figure></p>
<p>.gitignore 添加如下两行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">!lib.a</div><div class="line">*.a</div></pre></td></tr></table></figure></p>
<h3 id="第九关（status）"><a href="#第九关（status）" class="headerlink" title="第九关（status）"></a>第九关（status）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: status</div><div class="line">Level: 9</div><div class="line">Difficulty: *</div><div class="line"></div><div class="line">There are some files <span class="keyword">in</span> this repository, one of the files is untracked, <span class="built_in">which</span> file is it?</div></pre></td></tr></table></figure>
<p>找出未被 git 跟踪管理的文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git status <span class="comment"># TODO：查看 Untracked files 区域的文件</span></div><div class="line">githug play <span class="comment"># TODO：输入查看到的 untracked 文件</span></div></pre></td></tr></table></figure></p>
<h3 id="第十关（number-of-files-committed）"><a href="#第十关（number-of-files-committed）" class="headerlink" title="第十关（number of files committed）"></a>第十关（number of files committed）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: number_of_files_committed</div><div class="line">Level: 10</div><div class="line">Difficulty: *</div><div class="line"></div><div class="line">There are some files <span class="keyword">in</span> this repository, how many of the files will be committed?</div></pre></td></tr></table></figure>
<p>统计 staging area 的文件数。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git status <span class="comment"># TODO：查看 staging area 的文件数</span></div><div class="line">githug play <span class="comment"># TODO：输入 staging area 的文件数</span></div></pre></td></tr></table></figure></p>
<h3 id="第十一关（rm）"><a href="#第十一关（rm）" class="headerlink" title="第十一关（rm）"></a>第十一关（rm）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: rm</div><div class="line">Level: 11</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">A file has been removed from the working tree, however the file was not removed from the repository.  Find out what this file was and remove it.</div></pre></td></tr></table></figure>
<p>某个文件已经从硬盘删除，但没有从仓库中移除，需要找出并移除。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git status # TODO：查看工作目录，带有 deleted: 标识的就是被删除的文件</div><div class="line">git rm deleteme.rb # deleteme.rb 就是上面看到的文件</div><div class="line">git status # 可以看到 deleteme.rb 被放进了 staging area</div></pre></td></tr></table></figure></p>
<h3 id="第十二关（rm-cached）"><a href="#第十二关（rm-cached）" class="headerlink" title="第十二关（rm cached）"></a>第十二关（rm cached）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: rm_cached</div><div class="line">Level: 12</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">A file has accidentally been added to your staging area, find out <span class="built_in">which</span> file and remove it from the staging area.  *NOTE* Do not remove the file from the file system, only from git.</div></pre></td></tr></table></figure>
<p>将被意外地放进 staging area 的文件移除。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git status</div><div class="line">git rm --cached deleteme.rb <span class="comment"># deleteme.rb 就是意外 add 到 git 仓库的文件</span></div><div class="line">git status <span class="comment"># 可以看到 deleteme.rb 变成 untracked 状态</span></div></pre></td></tr></table></figure></p>
<h3 id="第十三关（stash）"><a href="#第十三关（stash）" class="headerlink" title="第十三关（stash）"></a>第十三关（stash）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: stash</div><div class="line">Level: 13</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You<span class="string">'ve made some changes and want to work on them later. You should save them, but don'</span>t commit them.</div></pre></td></tr></table></figure>
<p>将当前工作目录的变更 stash（储藏）。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git status <span class="comment"># 可以看到当前工作目录的变更</span></div><div class="line">git stash</div><div class="line">git status <span class="comment"># 可以看到当前工作目录变干净了</span></div></pre></td></tr></table></figure></p>
<p>stash 只是将当前工作目录的变更储藏起来，没有 commit ，这很方便我们需要切换分支应对紧急工作，但又不想 commit 当前未完成的工作的情况。</p>
<h3 id="第十四关（rename）"><a href="#第十四关（rename）" class="headerlink" title="第十四关（rename）"></a>第十四关（rename）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: rename</div><div class="line">Level: 14</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">We have a file called `oldfile.txt`. We want to rename it to `newfile.txt` and stage this change.</div></pre></td></tr></table></figure>
<p>重命名某个已经被 git 追踪管理的文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git mv oldfile.txt newfile.txt <span class="comment"># git mv 命令自动 stage 文件</span></div><div class="line">git status <span class="comment"># 可以看到 newfile.txt 已经放进 staging area</span></div></pre></td></tr></table></figure></p>
<h3 id="第十五关（restructure）"><a href="#第十五关（restructure）" class="headerlink" title="第十五关（restructure）"></a>第十五关（restructure）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: restructure</div><div class="line">Level: 15</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">You added some files to your repository, but now realize that your project needs to be restructured.  Make a new folder named `src` and using Git move all of the .html files into this folder.</div></pre></td></tr></table></figure>
<p>将所有已经被 git 追踪管理的 .html 文件放进 src 目录。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir src</div><div class="line">git mv *.html src</div></pre></td></tr></table></figure></p>
<h3 id="第十六关（log）"><a href="#第十六关（log）" class="headerlink" title="第十六关（log）"></a>第十六关（log）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: <span class="built_in">log</span></div><div class="line">Level: 16</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You will be asked <span class="keyword">for</span> the <span class="built_in">hash</span> of most recent commit.  You will need to investigate the logs of the repository <span class="keyword">for</span> this.</div></pre></td></tr></table></figure>
<p>查看提交日志。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">log</span> <span class="comment"># TODO：查看最新 commit 的 hash 值</span></div><div class="line">githug play <span class="comment"># TODO：输入最新 commit 的 hash 值</span></div></pre></td></tr></table></figure></p>
<h3 id="第十七关（tag）"><a href="#第十七关（tag）" class="headerlink" title="第十七关（tag）"></a>第十七关（tag）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: tag</div><div class="line">Level: 17</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">We have a git repo and we want to tag the current commit with `new_tag`.</div></pre></td></tr></table></figure>
<p>给最新的 commit 打 tag。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git tag new_tag <span class="comment"># 不加额外参数就是给最新 commit 打 tag，具体可 git tag --help 查看</span></div></pre></td></tr></table></figure></p>
<h3 id="第十八关（push-tags）"><a href="#第十八关（push-tags）" class="headerlink" title="第十八关（push tags）"></a>第十八关（push tags）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: push_tags</div><div class="line">Level: 18</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">There are tags <span class="keyword">in</span> the repository that aren<span class="string">'t pushed into remote repository. Push them now.</span></div></pre></td></tr></table></figure>
<p>将所有本地仓库的 tag 都推送到远程仓库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push --tag origin master</div></pre></td></tr></table></figure></p>
<h3 id="第十九关（commit-amend）"><a href="#第十九关（commit-amend）" class="headerlink" title="第十九关（commit amend）"></a>第十九关（commit amend）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: commit_amend</div><div class="line">Level: 19</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">The `README` file has been committed, but it looks like the file `forgotten_file.rb` was missing from the commit.  Add the file and amend your previous commit to include it.</div></pre></td></tr></table></figure>
<p>上次的提交漏掉一个文件，需要补上。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git status</div><div class="line">git add forgotten_file.rb</div><div class="line">git commit --amend <span class="comment"># TODO：可以修改之前提交的注释</span></div></pre></td></tr></table></figure></p>
<h3 id="第二十关（commit-in-future）"><a href="#第二十关（commit-in-future）" class="headerlink" title="第二十关（commit in future）"></a>第二十关（commit in future）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: commit_in_future</div><div class="line">Level: 20</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">Commit your changes with the future date (e.g. tomorrow).</div></pre></td></tr></table></figure>
<p>指定时间 commit。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit -m <span class="string">"githug test"</span> --date=19.11.2016</div></pre></td></tr></table></figure></p>
<h3 id="第二十一关（reset）"><a href="#第二十一关（reset）" class="headerlink" title="第二十一关（reset）"></a>第二十一关（reset）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: reset</div><div class="line">Level: 21</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">There are two files to be committed.  The goal was to add each file as a separate commit, however both were added by accident.  Unstage the file `to_commit_second.rb` using the reset <span class="built_in">command</span> (don<span class="string">'t commit anything).</span></div></pre></td></tr></table></figure>
<p>有两个文件已经添加到 staging area，想分开 commit，希望能将其中一个文件先 unstage。<br>reset 命令是用来做版本回退的。reset HEAD 就是回退到最新的 commit。设定不同参数可以对回退的内容做进一步的操作（见下一关）。reset 是比较重要的一个命令，需要去详细了解更多的用法。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git status</div><div class="line">git reset HEAD to_commit_second.rb</div><div class="line">git status</div></pre></td></tr></table></figure></p>
<p>注：这关即使使用 git rm –cached 命令也能通过，但表达的含义是不同的，注意区分。</p>
<ul>
<li>只有当文件在 staging area 是 new file 时，git rm –cached 与 git reset HEAD 才有同样的效果。</li>
</ul>
<h3 id="第二十二关（reset-soft）"><a href="#第二十二关（reset-soft）" class="headerlink" title="第二十二关（reset soft）"></a>第二十二关（reset soft）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: reset_soft</div><div class="line">Level: 22</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You committed too soon. Now you want to undo the last commit, <span class="keyword">while</span> keeping the index.</div></pre></td></tr></table></figure>
<p>撤销上一次的提交并将提交的内容放回 staging area。</p>
<ul>
<li>–soft     将提交的内容放回 staging area</li>
<li>–mixed     重置 staging area，但不影响 working directory（默认）</li>
<li>–hard     重置 staging area 和 working directory</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git status</div><div class="line">git reset --soft HEAD^1</div><div class="line">git status</div></pre></td></tr></table></figure>
<h3 id="第二十三关（checkout-file）"><a href="#第二十三关（checkout-file）" class="headerlink" title="第二十三关（checkout file）"></a>第二十三关（checkout file）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: checkout_file</div><div class="line">Level: 23</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">A file has been modified, but you don<span class="string">'t want to keep the modification.  Checkout the `config.rb` file from the last commit.</span></div></pre></td></tr></table></figure>
<p>根据最新的 commit 的版本来撤销当前文件的修改。</p>
<ul>
<li>checkout 不指定版本时，若 staging area 存在该文件的暂存，则用 staging area 的版本覆盖 working directory 的版本；</li>
<li>checkout 指定版本时，unstage 文件，并用仓库版本覆盖working directory 的版本<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git status</div><div class="line">git checkout HEAD config.rb</div><div class="line">git status</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="第二十四关（remote）"><a href="#第二十四关（remote）" class="headerlink" title="第二十四关（remote）"></a>第二十四关（remote）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: remote</div><div class="line">Level: 24</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">This project has a remote repository.  Identify it.</div></pre></td></tr></table></figure>
<p>查看远端仓库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git remote</div></pre></td></tr></table></figure></p>
<h3 id="第二十五关（remote-url）"><a href="#第二十五关（remote-url）" class="headerlink" title="第二十五关（remote url）"></a>第二十五关（remote url）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: remote_url</div><div class="line">Level: 25</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">The remote repositories have a url associated to them.  Please enter the url of remote_location.</div></pre></td></tr></table></figure>
<p>查看远端仓库及其 url。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git remote -v</div><div class="line">githug play <span class="comment"># TODO：正确答案是 https://github.com/githug/not_a_repo</span></div></pre></td></tr></table></figure></p>
<h3 id="第二十六关（pull）"><a href="#第二十六关（pull）" class="headerlink" title="第二十六关（pull）"></a>第二十六关（pull）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: pull</div><div class="line">Level: 26</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You need to pull changes from your origin repository.</div></pre></td></tr></table></figure>
<p>从远端拉取仓库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git remote</div><div class="line">git pull origin master</div></pre></td></tr></table></figure></p>
<p>pull 命令的一般格式是：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git pull &lt;远程仓库名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</div></pre></td></tr></table></figure></p>
<h3 id="第二十七关（remote-add）"><a href="#第二十七关（remote-add）" class="headerlink" title="第二十七关（remote add）"></a>第二十七关（remote add）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: remote_add</div><div class="line">Level: 27</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">Add a remote repository called `origin` with the url https://github.com/githug/githug</div></pre></td></tr></table></figure>
<p>添加一个远程仓库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git remote -v</div><div class="line">git remote add origin https://github.com/githug/githug <span class="comment"># origin 是远程仓库名</span></div><div class="line">git remote -v</div></pre></td></tr></table></figure></p>
<h3 id="第二十八关（push）"><a href="#第二十八关（push）" class="headerlink" title="第二十八关（push）"></a>第二十八关（push）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: push</div><div class="line">Level: 28</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">Your <span class="built_in">local</span> master branch has diverged from the remote origin/master branch. Rebase your commit onto origin/master and push it to remote.</div></pre></td></tr></table></figure>
<p>从本地推送更新到远程仓库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git rebase origin master</div><div class="line">git push origin master</div></pre></td></tr></table></figure></p>
<p>push 命令的一般格式是：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git push &lt;远程仓库名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</div></pre></td></tr></table></figure></p>
<h3 id="第二十九关（diff）"><a href="#第二十九关（diff）" class="headerlink" title="第二十九关（diff）"></a>第二十九关（diff）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: diff</div><div class="line">Level: 29</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">There have been modifications to the `app.rb` file since your last commit.  Find out <span class="built_in">which</span> line has changed.</div></pre></td></tr></table></figure>
<p>查看文件差异。</p>
<ul>
<li>git diff：查看 working directory 与 staging area 之间的差异</li>
<li>git diff –cached：查看 repository 与 staging area 之间的差异</li>
<li>git diff HEAD：查看 repositiory 与 working directory 之间的差异<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git diff</div><div class="line">githug play <span class="comment"># What is the number of the line which has changed? 26</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>diff 显示的差异：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">diff --git a/app.rb b/app.rb</div><div class="line">index 4f703ca..3bfa839 100644</div><div class="line">--- a/app.rb</div><div class="line">+++ b/app.rb</div><div class="line">@@ -23,7 +23,7 @@ get &apos;/yet_another&apos; do</div><div class="line">   erb :success</div><div class="line"> end</div><div class="line"> get &apos;/another_page&apos; do</div><div class="line">-  @message = get_response(&apos;data.json&apos;)</div><div class="line">+  @message = get_response(&apos;server.json&apos;)</div><div class="line">   erb :another</div><div class="line"> end</div></pre></td></tr></table></figure></p>
<h3 id="第三十关（blame）"><a href="#第三十关（blame）" class="headerlink" title="第三十关（blame）"></a>第三十关（blame）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: blame</div><div class="line">Level: 30</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">Someone has put a password inside the file `config.rb` find out who it was.</div></pre></td></tr></table></figure>
<p>查看文件内容的修改人。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git blame config.rb</div><div class="line">githug play <span class="comment"># Who made the commit with the password? Spider Man</span></div></pre></td></tr></table></figure></p>
<h3 id="第三十一关（branch）"><a href="#第三十一关（branch）" class="headerlink" title="第三十一关（branch）"></a>第三十一关（branch）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: branch</div><div class="line">Level: 31</div><div class="line">Difficulty: *</div><div class="line"></div><div class="line">You want to work on a piece of code that has the potential to <span class="built_in">break</span> things, create the branch test_code.</div></pre></td></tr></table></figure>
<p>创建分支。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git branch</div><div class="line">git branch test_code</div><div class="line">git branch</div></pre></td></tr></table></figure></p>
<h3 id="第三十二关（checkout）"><a href="#第三十二关（checkout）" class="headerlink" title="第三十二关（checkout）"></a>第三十二关（checkout）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: checkout</div><div class="line">Level: 32</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">Create and switch to a new branch called my_branch.  You will need to create a branch like you did <span class="keyword">in</span> the previous level.</div></pre></td></tr></table></figure>
<p>创建一个分支，并切换到新创建的分支。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git branch my_branch</div><div class="line">git checkout my_branch</div></pre></td></tr></table></figure></p>
<p>or<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout -b branch</div></pre></td></tr></table></figure></p>
<h3 id="第三十三关（checkout-tag）"><a href="#第三十三关（checkout-tag）" class="headerlink" title="第三十三关（checkout tag）"></a>第三十三关（checkout tag）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: checkout_tag</div><div class="line">Level: 33</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You need to fix a bug <span class="keyword">in</span> the version 1.2 of your app. Checkout the tag `v1.2`.</div></pre></td></tr></table></figure>
<p>切换 HEAD 到指定的 tag。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git tag <span class="comment"># 查看 tag</span></div><div class="line">git checkout v1.2 <span class="comment"># v1.2是 tag。</span></div></pre></td></tr></table></figure></p>
<h3 id="第三十四关（checkout-tag-over-branch）"><a href="#第三十四关（checkout-tag-over-branch）" class="headerlink" title="第三十四关（checkout tag over branch）"></a>第三十四关（checkout tag over branch）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: checkout_tag_over_branch</div><div class="line">Level: 34</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You need to fix a bug <span class="keyword">in</span> the version 1.2 of your app. Checkout the tag `v1.2` (Note: There is also a branch named `v1.2`).</div></pre></td></tr></table></figure>
<p>切换 HEAD 到指定 tag，但存在相同的标签名和分支名。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># git branch</span></div><div class="line"><span class="comment"># git tag</span></div><div class="line">git checkout tags/v1.2</div></pre></td></tr></table></figure></p>
<h3 id="第三十五关（branch-at）"><a href="#第三十五关（branch-at）" class="headerlink" title="第三十五关（branch at）"></a>第三十五关（branch at）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: branch_at</div><div class="line">Level: 35</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">You forgot to branch at the previous commit and made a commit on top of it. Create branch test_branch at the commit before the last.</div></pre></td></tr></table></figure>
<p>根据一个指定的提交来创建分支。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch test_branch HEAD^1</div></pre></td></tr></table></figure></p>
<h3 id="第三十六关（delete-branch）"><a href="#第三十六关（delete-branch）" class="headerlink" title="第三十六关（delete branch）"></a>第三十六关（delete branch）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: delete_branch</div><div class="line">Level: 36</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You have created too many branches <span class="keyword">for</span> your project. There is an old branch <span class="keyword">in</span> your repo called <span class="string">'delete_me'</span>, you should delete it.</div></pre></td></tr></table></figure>
<p>删除一个分支。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git branch <span class="_">-d</span> delete_me</div></pre></td></tr></table></figure></p>
<h3 id="第三十七关（push-branch）"><a href="#第三十七关（push-branch）" class="headerlink" title="第三十七关（push branch）"></a>第三十七关（push branch）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: push_branch</div><div class="line">Level: 37</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You<span class="string">'ve made some changes to a local branch and want to share it, but aren'</span>t yet ready to merge it with the <span class="string">'master'</span> branch.  Push only <span class="string">'test_branch'</span> to the remote repository</div></pre></td></tr></table></figure>
<p>将分支推送到远程仓库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git branch</div><div class="line">git push origin test_branch test_branch</div></pre></td></tr></table></figure></p>
<h3 id="第三十八关（merge）"><a href="#第三十八关（merge）" class="headerlink" title="第三十八关（merge）"></a>第三十八关（merge）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: merge</div><div class="line">Level: 38</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">We have a file <span class="keyword">in</span> the branch <span class="string">'feature'</span>; Let<span class="string">'s merge it to the master branch.</span></div></pre></td></tr></table></figure>
<p>合并分支。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git branch</div><div class="line">git merge feature</div></pre></td></tr></table></figure></p>
<h3 id="第三十九关（fetch）"><a href="#第三十九关（fetch）" class="headerlink" title="第三十九关（fetch）"></a>第三十九关（fetch）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: fetch</div><div class="line">Level: 39</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">Looks like a new branch was pushed into our remote repository. Get the changes without merging them with the <span class="built_in">local</span> repository</div></pre></td></tr></table></figure>
<p>拉去远程仓库的更新，但不与当前分支合并。git pull 相当于 git fetch 和 git merge 的组合。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git fetch origin</div></pre></td></tr></table></figure></p>
<h3 id="第四十关（rebase）"><a href="#第四十关（rebase）" class="headerlink" title="第四十关（rebase）"></a>第四十关（rebase）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: rebase</div><div class="line">Level: 40</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">We are using a git rebase workflow and the feature branch is ready to go into master. Let<span class="string">'s rebase the feature branch onto our master branch.</span></div></pre></td></tr></table></figure>
<p>rebase（变基）feature 分支到 master 分支。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rebase master feature</div></pre></td></tr></table></figure></p>
<p>变基前：<br><img src="http://7xsi11.com1.z0.glb.clouddn.com/rebase_0.png?attname=" alt=""> </p>
<p>变基后：<br><img src="http://7xsi11.com1.z0.glb.clouddn.com/rebase_1.png?attname=" alt=""> </p>
<h3 id="第四十一关（rebase-onto）"><a href="#第四十一关（rebase-onto）" class="headerlink" title="第四十一关（rebase onto）"></a>第四十一关（rebase onto）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: rebase_onto</div><div class="line">Level: 41</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You have created your branch from `wrong_branch` and already made some commits, and you realise that you needed to create your branch from `master`. Rebase your commits onto `master` branch so that you don<span class="string">'t have `wrong_branch` commits.</span></div></pre></td></tr></table></figure>
<p>从错误的分支 wrong_branch 创建了一个分支 readme-update，并做了一些提交，但意识到应该是要从 master 分支来创建 readme-update分支的，希望将 readme-update 分支的几个新的提交都应用到 master 上，从而抛弃 wrong_branch 分支。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rebase --onto master wrong_branch readme-update</div></pre></td></tr></table></figure></p>
<p>命令的大概可以理解为，以 master 为新基底，应用从 wrong_branch 的基底开始的readme-update 分支。<br>变基前：<br><img src="http://7xsi11.com1.z0.glb.clouddn.com/rebase_onto_0.png?attname=" alt=""> </p>
<p>变基后：<br><img src="http://7xsi11.com1.z0.glb.clouddn.com/rebase_onto_1.png?attname=" alt=""> </p>
<h3 id="第四十二关（repack）"><a href="#第四十二关（repack）" class="headerlink" title="第四十二关（repack）"></a>第四十二关（repack）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: repack</div><div class="line">Level: 42</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">Optimise how your repository is packaged ensuring that redundant packs are removed.</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git repack</div><div class="line">git repack <span class="_">-d</span></div></pre></td></tr></table></figure>
<h3 id="第四十三关（cherry-pick）"><a href="#第四十三关（cherry-pick）" class="headerlink" title="第四十三关（cherry pick）"></a>第四十三关（cherry pick）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: cherry-pick</div><div class="line">Level: 43</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">Your new feature isn<span class="string">'t worth the time and you'</span>re going to delete it. But it has one commit that fills <span class="keyword">in</span> `README` file, and you want this commit to be on the master as well.</div></pre></td></tr></table></figure>
<p>应用某个指定的提交。从 feature 分支拾取 “Filled in README.md with proper input” 这个提交到当前分支。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git cherry-pick ca32a6d <span class="comment"># ca32a6d 是 commit 的 hash 值</span></div></pre></td></tr></table></figure></p>
<p>cherry-pick 前：<br><img src="http://7xsi11.com1.z0.glb.clouddn.com/cherry-pick-0.png?attname=" alt=""> </p>
<p>cherry-pick 后：<br><img src="http://7xsi11.com1.z0.glb.clouddn.com/cherry-pick-1.png?attname=" alt=""> </p>
<h3 id="第四十四关（grep）"><a href="#第四十四关（grep）" class="headerlink" title="第四十四关（grep）"></a>第四十四关（grep）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: grep</div><div class="line">Level: 44</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">Your project<span class="string">'s deadline approaches, you should evaluate how many TODOs are left in your code</span></div></pre></td></tr></table></figure>
<p>git grep 搜索。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git grep TODO</div></pre></td></tr></table></figure></p>
<h3 id="第四十五关（rename-commit）"><a href="#第四十五关（rename-commit）" class="headerlink" title="第四十五关（rename commit）"></a>第四十五关（rename commit）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: rename_commit</div><div class="line">Level: 45</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">Correct the typo <span class="keyword">in</span> the message of your first (non-root) commit.</div></pre></td></tr></table></figure>
<p>重命名提交。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">log</span> <span class="comment"># TODO：查看提交日志，找到需要修改的 commit 之前的 commit 的 hash 值</span></div><div class="line">git rebase -i ae057e077f49908282f685e224cc99ef493a1718</div></pre></td></tr></table></figure></p>
<p>提交日志如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">commit 3d2f6ea75f6488db71db5f528743a2c48b43ce8d</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:31:41 2016 +0800</div><div class="line"></div><div class="line">    Second commit</div><div class="line"></div><div class="line">commit 5bd94ef24bd739de53e5ffd2fe3ebba02db4f699</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:31:41 2016 +0800</div><div class="line"></div><div class="line">    First coommit</div><div class="line"></div><div class="line">commit ae057e077f49908282f685e224cc99ef493a1718</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:31:41 2016 +0800</div><div class="line"></div><div class="line">    Initial commit</div></pre></td></tr></table></figure></p>
<p>git rebase -i 命令会列出指定 commit 之后的所有 commit，然后可以根据需要指定操作。本关需要的操作是重命名，具体修改如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">reword e7e5b6c First coommit <span class="comment"># pick 修改为 reword</span></div><div class="line">pick c8c97c1 Second commit</div></pre></td></tr></table></figure></p>
<p>修改之后，保存退出。<br>会弹出新的编辑窗口，将错误拼写的 coommit 改为 commit，然后保存退出即可。</p>
<h3 id="第四十六关（squash）"><a href="#第四十六关（squash）" class="headerlink" title="第四十六关（squash）"></a>第四十六关（squash）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: squash</div><div class="line">Level: 46</div><div class="line">Difficulty: ****</div><div class="line"></div><div class="line">You have committed several <span class="built_in">times</span> but would like all those changes to be one commit.</div></pre></td></tr></table></figure>
<p>压缩多个提交历史。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">log</span></div><div class="line">git rebase -i 3f8f811c65eee4f2ab08c50174f6b8443c63cf5d</div></pre></td></tr></table></figure></p>
<p>日志如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">commit e71814b6ab0c0d26f35f19bb2f0c9ee1c0d42965</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:32:41 2016 +0800</div><div class="line"></div><div class="line">    Updating README (squash this commit into Adding README)</div><div class="line"></div><div class="line">commit 37224b11c1bb4e3b13eb3fdb0d1f54d05158c3b7</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:32:41 2016 +0800</div><div class="line"></div><div class="line">    Updating README (squash this commit into Adding README)</div><div class="line"></div><div class="line">commit 951137b9fbe5e65c419afd1c129ac6a791a31298</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:32:41 2016 +0800</div><div class="line"></div><div class="line">    Updating README (squash this commit into Adding README)</div><div class="line"></div><div class="line">commit 6d2c1edb31691bc28791a4e6950a7d979a82a5fd</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:32:41 2016 +0800</div><div class="line"></div><div class="line">    Adding README</div><div class="line"></div><div class="line">commit 3f8f811c65eee4f2ab08c50174f6b8443c63cf5d</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:32:41 2016 +0800</div><div class="line"></div><div class="line">    Initial Commit</div><div class="line">~</div><div class="line">(END)</div></pre></td></tr></table></figure></p>
<p>指定 squash 操作，保存并退出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">pick 6d2c1ed Adding README</div><div class="line">squash 951137b Updating README (squash this commit into Adding README)</div><div class="line">squash 37224b1 Updating README (squash this commit into Adding README)</div><div class="line">squash e71814b Updating README (squash this commit into Adding README)</div></pre></td></tr></table></figure></p>
<p>之后，修改注释，保存退出，即可。</p>
<h3 id="第四十七关（merge-squash）"><a href="#第四十七关（merge-squash）" class="headerlink" title="第四十七关（merge squash）"></a>第四十七关（merge squash）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: merge_squash</div><div class="line">Level: 47</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">Merge all commits from the long-feature-branch as a single commit.</div></pre></td></tr></table></figure>
<p>将某个分支的全部提交都压缩成一个提交，并将所有的修改内容放进 staging area。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git status <span class="comment"># 处在 master 分支</span></div><div class="line">git merge --squash long-feature-branch</div><div class="line">git commit -m <span class="string">"merge long-feature-branch"</span></div></pre></td></tr></table></figure></p>
<h3 id="第四十八关（reorder）"><a href="#第四十八关（reorder）" class="headerlink" title="第四十八关（reorder）"></a>第四十八关（reorder）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: reorder</div><div class="line">Level: 48</div><div class="line">Difficulty: ****</div><div class="line"></div><div class="line">You have committed several <span class="built_in">times</span> but <span class="keyword">in</span> the wrong order. Please reorder your commits.</div></pre></td></tr></table></figure>
<p>重新排序提交历史。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">log</span> </div><div class="line">git rebase -i 62cbe4cb0e967a09e15db355350f98a836a10e33</div><div class="line">git <span class="built_in">log</span></div></pre></td></tr></table></figure></p>
<p>日志如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">commit d5bd44db5e933cf0277b2a310ff49516c767053e</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:49:47 2016 +0800</div><div class="line"></div><div class="line">    Second commit</div><div class="line"></div><div class="line">commit aa2be89748b772c55f99cc3e3d2995cc90aa8a07</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:49:47 2016 +0800</div><div class="line"></div><div class="line">    Third commit</div><div class="line"></div><div class="line">commit dac3c422bdd7896cc218023bf5c9fa108f4108b0</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:49:47 2016 +0800</div><div class="line"></div><div class="line">    First commit</div><div class="line"></div><div class="line">commit 62cbe4cb0e967a09e15db355350f98a836a10e33</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Sun Nov 20 22:49:47 2016 +0800</div><div class="line"></div><div class="line">    Initial Setup</div></pre></td></tr></table></figure></p>
<p>将 Second commit 与 Thrid commit 所在行按正确顺序重排，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pick dac3c42 First commit</div><div class="line">pick d5bd44d Second commit</div><div class="line">pick aa2be89 Third commit</div></pre></td></tr></table></figure></p>
<p>保存退出。</p>
<h3 id="第四十九关（bisect）"><a href="#第四十九关（bisect）" class="headerlink" title="第四十九关（bisect）"></a>第四十九关（bisect）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: bisect</div><div class="line">Level: 49</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">A bug was introduced somewhere along the way.  You know that running `ruby prog.rb 5` should output 15.  You can also run `make <span class="built_in">test</span>`.  What are the first 7 chars of the <span class="built_in">hash</span> of the commit that introduced the bug.</div></pre></td></tr></table></figure>
<p>这关是关于 git 调试的二分查找，不太懂。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git bisect start master f608824</div><div class="line">git bisect run make <span class="built_in">test</span></div><div class="line">githug play <span class="comment"># TODO：答案是 18ed2ac1</span></div></pre></td></tr></table></figure></p>
<h3 id="第五十关（stage-lines）"><a href="#第五十关（stage-lines）" class="headerlink" title="第五十关（stage lines）"></a>第五十关（stage lines）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: stage_lines</div><div class="line">Level: 50</div><div class="line">Difficulty: ****</div><div class="line"></div><div class="line">You<span class="string">'ve made changes within a single file that belong to two different features, but neither of the changes are yet staged. Stage only the changes belonging to the first feature.</span></div></pre></td></tr></table></figure>
<p>提交文件的部分修改。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git status</div><div class="line">git add -p feature.rb</div></pre></td></tr></table></figure></p>
<p>git add -p 允许在提交前对要提交的内容做操作。本关出现提示如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">diff --git a/feature.rb b/feature.rb</div><div class="line">index 1a271e9..4a80dda 100644</div><div class="line">--- a/feature.rb</div><div class="line">+++ b/feature.rb</div><div class="line">@@ -1 +1,3 @@</div><div class="line"> this is the class of my feature</div><div class="line">+This change belongs to the first feature</div><div class="line">+This change belongs to the second feature</div><div class="line">Stage this hunk [y,n,q,a,d,/,e,?]? e</div></pre></td></tr></table></figure></p>
<p>输入 e。参数说明如下：</p>
<ul>
<li>y - stage this hunk</li>
<li>n - do not stage this hunk</li>
<li>q - quit; do not stage this hunk nor any of the remaining ones</li>
<li>a - stage this hunk and all later hunks in the file</li>
<li>d - do not stage this hunk nor any of the later hunks in the file</li>
<li>/ - search for a hunk matching the given regex</li>
<li>e - manually edit the current hunk</li>
<li>? - print help</li>
</ul>
<p>输入 e 后，转到新编辑窗口，删除不需要 add 的内容，该操作不会影响 working directory 的文件，结果如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Manual hunk edit mode -- see bottom for a quick guide</span></div><div class="line">@@ -1 +1,3 @@</div><div class="line"> this is the class of my feature</div><div class="line">+This change belongs to the first feature</div><div class="line"><span class="comment"># ---</span></div><div class="line">......</div></pre></td></tr></table></figure></p>
<p>保存退出，即可。检查变化：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git diff</div><div class="line">git status</div></pre></td></tr></table></figure></p>
<h3 id="第五十一关（find-old-branch）"><a href="#第五十一关（find-old-branch）" class="headerlink" title="第五十一关（find old branch）"></a>第五十一关（find old branch）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: find_old_branch</div><div class="line">Level: 51</div><div class="line">Difficulty: ****</div><div class="line"></div><div class="line">You have been working on a branch but got distracted by a major issue and forgot the name of it. Switch back to that branch.</div></pre></td></tr></table></figure>
<p>寻找忘记 name 的分支。本关通过 git reflog 列出所有操作记录来寻找。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git reflog</div><div class="line">git checkout solve_world_hunger <span class="comment"># solve_world_hunger 是分支名</span></div></pre></td></tr></table></figure></p>
<p>git reflog 的输出如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">894a16d HEAD@&#123;0&#125;: commit: commit another todo</div><div class="line">6876e5b HEAD@&#123;1&#125;: checkout: moving from solve_world_hunger to kill_the_batman</div><div class="line">324336a HEAD@&#123;2&#125;: commit: commit todo</div><div class="line">6876e5b HEAD@&#123;3&#125;: checkout: moving from blowup_sun_for_ransom to solve_world_hunger</div><div class="line">6876e5b HEAD@&#123;4&#125;: checkout: moving from kill_the_batman to blowup_sun_for_ransom</div><div class="line">6876e5b HEAD@&#123;5&#125;: checkout: moving from cure_common_cold to kill_the_batman</div><div class="line">6876e5b HEAD@&#123;6&#125;: commit (initial): initial commit</div></pre></td></tr></table></figure></p>
<h3 id="第五十二关（revert）"><a href="#第五十二关（revert）" class="headerlink" title="第五十二关（revert）"></a>第五十二关（revert）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Name: revert</div><div class="line">Level: 52</div><div class="line">Difficulty: ****</div><div class="line"></div><div class="line">You have committed several <span class="built_in">times</span> but want to undo the middle commit.</div><div class="line">All commits have been pushed, so you can<span class="string">'t change existing history.</span></div></pre></td></tr></table></figure>
<p>撤销提交历史中间的某个提交，不能改变已存在的提交历史。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">log</span></div><div class="line">git revert HEAD^1</div><div class="line">git <span class="built_in">log</span></div></pre></td></tr></table></figure></p>
<p>revert 前的 log 如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">commit 3f0f4295b8c5c62cfa7a6322f9016ab5c1af9294</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Tue Nov 22 21:56:25 2016 +0800</div><div class="line"></div><div class="line">    Second commit</div><div class="line"></div><div class="line">commit 0f8d1668981f55a4a7ff48bf083465be78978f1d</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Tue Nov 22 21:56:24 2016 +0800</div><div class="line"></div><div class="line">    Bad commit</div><div class="line"></div><div class="line">commit 7531dde295446e41d885a4038536432414ea608b</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Tue Nov 22 21:56:24 2016 +0800</div><div class="line"></div><div class="line">    First commit</div></pre></td></tr></table></figure></p>
<p>revert 会生成新的 commit。revert 后的 log 如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">commit 17ad1b09ffaadb7aec03a2de4c46f05b2e40a980</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Tue Nov 22 21:56:52 2016 +0800</div><div class="line"></div><div class="line">    Revert <span class="string">"Bad commit"</span></div><div class="line">    </div><div class="line">    This reverts commit 0f8d1668981f55a4a7ff48bf083465be78978f1d.</div><div class="line"></div><div class="line">commit 3f0f4295b8c5c62cfa7a6322f9016ab5c1af9294</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Tue Nov 22 21:56:25 2016 +0800</div><div class="line"></div><div class="line">    Second commit</div><div class="line"></div><div class="line">commit 0f8d1668981f55a4a7ff48bf083465be78978f1d</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Tue Nov 22 21:56:24 2016 +0800</div><div class="line"></div><div class="line">    Bad commit</div><div class="line"></div><div class="line">commit 7531dde295446e41d885a4038536432414ea608b</div><div class="line">Author: sum &lt;sum@localhost.localdomain&gt;</div><div class="line">Date:   Tue Nov 22 21:56:24 2016 +0800</div><div class="line"></div><div class="line">    First commit</div></pre></td></tr></table></figure></p>
<p>revert 与 reset 不同。</p>
<ul>
<li>revert 只撤销当前的 commit，不会影响之后的 commit</li>
<li>reset 会将指定的 commit 之后的所有 commit 都退回 staging area 或丢弃</li>
</ul>
<h3 id="第五十三关（restore）"><a href="#第五十三关（restore）" class="headerlink" title="第五十三关（restore）"></a>第五十三关（restore）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: restore</div><div class="line">Level: 53</div><div class="line">Difficulty: ****</div><div class="line"></div><div class="line">You decided to delete your latest commit by running `git reset --hard HEAD^`.  (Not a smart thing to do.)  You <span class="keyword">then</span> change your mind, and want that commit back.  Restore the deleted commit.</div></pre></td></tr></table></figure>
<p>错误撤销 commit 后，恢复被删除的 commit。思路是根据 git reflog 查看所有操作记录，找到误操作之前的 commit id，然后恢复。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git reflog</div><div class="line">git checkout 2855121 <span class="comment"># 2855121 是被错误回退的 commit 的 hash 值</span></div></pre></td></tr></table></figure></p>
<p>git reflog 输出如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">36df271 HEAD@&#123;0&#125;: reset: moving to HEAD^</div><div class="line">2855121 HEAD@&#123;1&#125;: commit: Restore this commit</div><div class="line">36df271 HEAD@&#123;2&#125;: commit: First commit</div><div class="line">3c525b4 HEAD@&#123;3&#125;: commit (initial): Initial commit</div></pre></td></tr></table></figure></p>
<h3 id="第五十四关（conflict）"><a href="#第五十四关（conflict）" class="headerlink" title="第五十四关（conflict）"></a>第五十四关（conflict）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: conflict</div><div class="line">Level: 54</div><div class="line">Difficulty: ****</div><div class="line"></div><div class="line">You need to merge mybranch into the current branch (master). But there may be some incorrect changes <span class="keyword">in</span> mybranch <span class="built_in">which</span> may cause conflicts. Solve any merge-conflicts you come across and finish the merge.</div></pre></td></tr></table></figure>
<p>解决冲突。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">git branch</div><div class="line">git merge mybranch</div><div class="line">vi poem.txt</div><div class="line">git add poem.txt</div><div class="line">git commit -m <span class="string">"merge mybranch"</span></div><div class="line">git merge mybranch</div></pre></td></tr></table></figure></p>
<p>vi 修改前 poem.text 内容如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Humpty dumpty</div><div class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</div><div class="line">Categorized shoes by color</div><div class="line">=======</div><div class="line">Sat on a wall</div><div class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; mybranch</div><div class="line">Humpty dumpty</div><div class="line">Had a great fall</div></pre></td></tr></table></figure></p>
<p>冲突文件中 &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD 到 ======= 之间的内容代表当前分支的修改，======= 到 &gt;&gt;&gt;&gt;&gt;&gt;&gt; 之间的内容代表 mybranch 分支的修改。<br>本关保留 mybranch 的修改即可，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Humpty dumpty</div><div class="line">Sat on a wall</div><div class="line">Humpty dumpty</div><div class="line">Had a great fall</div></pre></td></tr></table></figure></p>
<h3 id="第五十五关（submodule）"><a href="#第五十五关（submodule）" class="headerlink" title="第五十五关（submodule）"></a>第五十五关（submodule）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: submodule</div><div class="line">Level: 55</div><div class="line">Difficulty: **</div><div class="line"></div><div class="line">You want to include the files from the following repo: `https://github.com/jackmaney/githug-include-me` into a the folder `./githug-include-me`. Do this without manually cloning the repo or copying the files from the repo into this repo.</div></pre></td></tr></table></figure>
<p>子模块。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git submodule add https://github.com/jackmaney/githug-include-me ./githug-include-me</div></pre></td></tr></table></figure></p>
<h3 id="第五十六关（contribute）"><a href="#第五十六关（contribute）" class="headerlink" title="第五十六关（contribute）"></a>第五十六关（contribute）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Name: contribute</div><div class="line">Level: 56</div><div class="line">Difficulty: ***</div><div class="line"></div><div class="line">This is the final level, the goal is to contribute to this repository by making a pull request on GitHub.  Please note that this level is designed to encourage you to add a valid contribution to Githug, not testing your ability to create a pull request.  Contributions that are likely to be accepted are levels, bug fixes and improved documentation.</div></pre></td></tr></table></figure>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/git/">git</a>
  </div>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name: 'jiajieshen' };
  (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';
      ds.async = true;
      ds.src = 'http://static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
      || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END -->


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:jiajieshen.github.io">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/gearman/">gearman</a><small>1</small></li>
  
    <li><a href="/tags/git/">git</a><small>3</small></li>
  
    <li><a href="/tags/php/">php</a><small>3</small></li>
  
    <li><a href="/tags/服务器/">服务器</a><small>2</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2017 Jiajie Shen
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>


<a href="https://github.com/jiajieshen" target="_blank"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_white_ffffff.png" alt="Fork me on GitHub"></a>
